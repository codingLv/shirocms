<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>媒体内容管理系统</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script  src="static/js/jquery.min.js"></script>
    <!-- basic styles -->

    <link href="static/bootstrap-3.3.7-dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- fonts -->

    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:400,300" />

    <!-- ace styles -->

    <link rel="stylesheet" href="assets/css/ace.min.css" />
    <link rel="stylesheet" href="assets/css/ace-rtl.min.css" />
    <link rel="stylesheet" href="assets/css/ace-skins.min.css" />
    <link href="static/bootstrap-3.3.7-dist/bootstrap-select-1.12.4/css/bootstrap-select.min.css" rel="stylesheet">
    <script src="assets/js/ace-extra.min.js"></script>
    <script  src="static/bootstrap-3.3.7-dist/bootstrap-select-1.12.4/js/bootstrap-select.min.js"></script>
    <!-- basic scripts -->

    <script  src="static/bootstrap-3.3.7-dist/js/bootstrap.min.js"></script>
    <script src="assets/js/typeahead-bs2.min.js"></script>

    <!-- page specific plugin scripts -->

    <script src="assets/js/jquery.dataTables.min.js"></script>
    <script src="assets/js/jquery.dataTables.bootstrap.js"></script>

    <!-- ace scripts -->

    <script src="assets/js/ace-elements.min.js"></script>
    <script src="assets/js/ace.min.js"></script>

    <!-- inline scripts related to this page -->
</head>

<body>

<span id="welcome" style="position: absolute;font-size: 54px;top: 300px;left: 600px; visibility:visible ; z-index: 999;">Welcome</span>

<!-- 删除失败 -->
<div class="modal fade" tabindex="-1" role="dialog" id="delete_fail">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">提示</h4>
            </div>
            <div class="modal-body">
                <p id="error_info">删除失败，当前节点下存在子节点或您没有权限</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- 角色新增弹出框 -->
<div class="modal fade" id="addRoleModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">新增</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Name</label>
                        <div class="col-sm-10">
                            <input type="text" name="Name" class="form-control" id="add_Rolename_input" placeholder="Name">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Authority</label>
                        <div class="col-sm-10">
                            <select id="Authority_select" name="Authority" class= "form-control selectpicker" multiple>

                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="addRole_save()">Save</button>
            </div>
        </div>
    </div>
</div>


<!-- 用户新增弹出框 -->
<div class="modal fade" id="addUserModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">新增</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Name</label>
                        <div class="col-sm-10">
                            <input type="text" name="Name" class="form-control" id="add_Username_input" placeholder="Name">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Password</label>
                        <div class="col-sm-10">
                            <input type="text" name="Pwd" class="form-control" id="add_Password_input" placeholder="Pwd">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Role</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="Role_select" name="RoleId">

                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Authority</label>
                        <div class="col-sm-10">
                            <select id="User_Authority_select" name="Authority" class= "form-control selectpicker" multiple>

                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="addUser_save()">Save</button>
            </div>
        </div>
    </div>
</div>


<!-- 角色编辑弹出框 -->
<div class="modal fade" id="updateRoleModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">编辑</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Name</label>
                        <div class="col-sm-10">
                            <input type="text" name="Name" class="form-control" id="update_Rolename_input" placeholder="Name">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Authority</label>
                        <div class="col-sm-10">
                            <select id="update_Authority_select" name="Authority" class= "form-control selectpicker" multiple>

                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="updateRole_save()">Save</button>
            </div>
        </div>
    </div>
</div>


<!-- 用户编辑弹出框 -->
<div class="modal fade" id="updateUserModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">编辑</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Name</label>
                        <div class="col-sm-10">
                            <input type="text" name="Name" class="form-control" id="update_Username_input" placeholder="Name">
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Role</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="update_Role" name="RoleId">

                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Authority</label>
                        <div class="col-sm-10">
                            <select id="User_update_Authority_select" name="Authority" class= "form-control selectpicker" multiple>

                            </select>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="updateUser_save()">Update</button>
            </div>
        </div>
    </div>
</div>

<!-- 更改弹出框 -->
<div class="modal fade" id="updateModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">编辑</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Name</label>
                        <div class="col-sm-10">
                            <input type="text" name="Name" class="form-control" id="update_name_input" placeholder="Name">
                        </div>
                    </div>
                    <div class="form-group" id="update_Grade_div">
                        <label class="col-sm-2 control-label">Grade</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="update_Grade" name="GradeId">

                            </select>
                        </div>
                    </div>
                    <div class="form-group" id="update_Subject_div">
                        <label class="col-sm-2 control-label">Subject</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="update_Subject" name="SubjectId">

                            </select>
                        </div>
                    </div>
                    <div class="form-group" style="display: none;" id="update_Knowledge_div">
                        <label class="col-sm-2 control-label">Konwledge</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="update_Knowledge" name="KnowledgeId">

                            </select>
                        </div>
                    </div>
                    <div class="form-group" style="display: none;" id="update_video_src">
                        <label class="col-sm-2 control-label">Video</label>
                        <div class="col-sm-10">
                            <input type="text" name="Video_src" class="form-control" id="update_video" placeholder="Video">
                        </div>
                    </div>
                    <div class="form-group" style="" id="update_video_sort">
                        <label class="col-sm-2 control-label">Sort</label>
                        <div class="col-sm-10">
                            <input type="text" name="Sort" class="form-control" id="update_Video_Sort" placeholder="Sort">
                        </div>
                    </div>
                    <div class="form-group" style="display: none;" id="update_video_clarity">
                        <label class="col-sm-2 control-label">Clarity</label>
                        <div class="col-sm-10">
                            <input type="text" name="Clarity" class="form-control" id="update_Video_Clarity" placeholder="Clarity">
                        </div>
                    </div>
                    <div class="form-group" style="display: none;" id="update_video_code">
                        <label class="col-sm-2 control-label">Check_code</label>
                        <div class="col-sm-10">
                            <input type="text" name="Check_code" class="form-control" id="update_Video_Check_code" placeholder="Check_code">
                        </div>
                    </div>
                    <div class="form-group" style="display: none;" id="update_video_introduction">
                        <label class="col-sm-2 control-label">Introduction</label>
                        <div class="col-sm-10">
                            <input type="text" name="Introduction" class="form-control" id="update_Video_Introduction" placeholder="Introduction">
                        </div>
                    </div>
                    <div class="form-group" style="display: none;" id="update_video_duration">
                        <label class="col-sm-2 control-label">Duration</label>
                        <div class="col-sm-10">
                            <input type="text" name="Duration" class="form-control" id="update_Video_Duration" placeholder="Duration">
                        </div>
                    </div>
                    <div class="form-group" style="display: none;" id="update_video_picture">
                        <label class="col-sm-2 control-label">Picture</label>
                        <div class="col-sm-10">
                            <input type="text" name="Picture" class="form-control" id="update_VideoPicture" placeholder="Picture">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="update_save()">Update</button>
            </div>
        </div>
    </div>
</div>

<!-- 新增弹出框 -->
<div class="modal fade" id="addModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">新增</h4>
            </div>
            <div class="modal-body">
                <form class="form-horizontal">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Name</label>
                        <div class="col-sm-10">
                            <input type="text" name="Name" class="form-control" id="add_name_input" placeholder="Name">
                        </div>
                    </div>
                    <div class="form-group" id="add_Grade">
                        <label class="col-sm-2 control-label">Grade</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="Grade_select" name="GradeId">

                            </select>
                        </div>
                    </div>
                    <div class="form-group" id="add_Subject">
                        <label class="col-sm-2 control-label">Subject</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="Subject_select" name="SubjectId">

                            </select>
                        </div>
                    </div>
                    <div class="form-group" style="display: none;" id="add_Konwledge">
                        <label class="col-sm-2 control-label">Konwledge</label>
                        <div class="col-sm-10">
                            <select class="form-control" id="Konwledge_select" name="KnowledgeId">

                            </select>
                        </div>
                    </div>
                    <div class="form-group" style="display: none;" id="video_src">
                        <label class="col-sm-2 control-label">Video</label>
                        <div class="col-sm-10">
                            <input type="text" name="Video_src" class="form-control" id="add_Video_src" placeholder="Video">
                        </div>
                    </div>
                    <div class="form-group" style="" id="video_sort">
                        <label class="col-sm-2 control-label">Sort</label>
                        <div class="col-sm-10">
                            <input type="text" name="Sort" class="form-control" id="add_Video_Sort" placeholder="Sort">
                        </div>
                    </div>
                    <div class="form-group" style="display: none;" id="video_clarity">
                        <label class="col-sm-2 control-label">Clarity</label>
                        <div class="col-sm-10">
                            <input type="text" name="Clarity" class="form-control" id="add_Video_Clarity" placeholder="Clarity">
                        </div>
                    </div>
                    <div class="form-group" style="display: none;" id="video_code">
                        <label class="col-sm-2 control-label">Check_code</label>
                        <div class="col-sm-10">
                            <input type="text" name="Check_code" class="form-control" id="add_Video_Check_code" placeholder="Check_code">
                        </div>
                    </div>
                    <div class="form-group" style="display: none;" id="video_introduction">
                        <label class="col-sm-2 control-label">Introduction</label>
                        <div class="col-sm-10">
                            <input type="text" name="Introduction" class="form-control" id="add_Video_Introduction" placeholder="Introduction">
                        </div>
                    </div>
                    <div class="form-group" style="display: none;" id="video_duration">
                        <label class="col-sm-2 control-label">Duration</label>
                        <div class="col-sm-10">
                            <input type="text" name="Duration" class="form-control" id="add_Video_Duration" placeholder="Duration">
                        </div>
                    </div>
                    <div class="form-group" style="display: none;" id="video_picture">
                        <label class="col-sm-2 control-label">Picture</label>
                        <div class="col-sm-10">
                            <input type="text" name="Picture" class="form-control" id="add_VideoPicture" placeholder="Picture">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" onclick="add_save()">Save</button>
            </div>
        </div>
    </div>
</div>


<div class="navbar navbar-default" id="navbar">
    <script type="text/javascript">
        try{ace.settings.check('navbar' , 'fixed')}catch(e){}
    </script>

    <div class="navbar-container" id="navbar-container">
        <div class="navbar-header pull-left">
            <a href="#" class="navbar-brand">
                <small>
                    <i class="glyphicon glyphicon-leaf"></i>
                    媒体内容管理系统
                </small>
            </a><!-- /.brand -->
        </div><!-- /.navbar-header -->

        <div class="navbar-header pull-right" role="navigation">
            <ul class="nav ace-nav">
                <li class="purple">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                        <i class="glyphicon glyphicon-th-list"></i>
                        <span class="badge badge-important"></span>
                    </a>
                </li>
                <li class="grey">
                    <a data-toggle="dropdown" class="dropdown-toggle" href="#">
                        <i class="glyphicon glyphicon-thumbs-up"></i>
                        <span class="badge badge-important"></span>
                    </a>
                </li>
                <li class="light-blue">
                    <a data-toggle="dropdown" href="#" class="dropdown-toggle">
                        <img class="nav-user-photo" src="assets/avatars/user.jpg" alt="Jason's Photo" />
                        <span class="user-info">
									<small>Welcome,</small>
									<span id="Username">asd</span>
								</span>

                        <i class="glyphicon glyphicon-chevron-down"></i>
                    </a>

                    <ul class="user-menu pull-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">
                        <li>
                            <a onclick='ajax_HttpRequest("getUsers?page_num=1",1)'>
                                <i class="glyphicon glyphicon-cog"></i>
                                Settings
                            </a>
                        </li>

                        <li>
                            <a href="#">
                                <i class="glyphicon glyphicon-list-alt"></i>
                                Profile
                            </a>
                        </li>

                        <li class="divider"></li>

                        <li>
                            <a href="Login.html">
                                <i class="glyphicon glyphicon-off"></i>
                                Logout
                            </a>
                        </li>
                    </ul>
                </li>
            </ul><!-- /.ace-nav -->
        </div><!-- /.navbar-header -->
    </div><!-- /.container -->
</div>

<div class="main-container" id="main-container">
    <script type="text/javascript">
        try{ace.settings.check('main-container' , 'fixed')}catch(e){}
    </script>

    <div class="main-container-inner">
        <div class="sidebar" id="sidebar">
            <script type="text/javascript">
                try{ace.settings.check('sidebar' , 'fixed')}catch(e){}
            </script>

            <div class="sidebar-shortcuts" id="sidebar-shortcuts">
                <div class="sidebar-shortcuts-large" id="sidebar-shortcuts-large">
                    <button class="btn btn-success">
                        <i class="glyphicon glyphicon-envelope"></i>
                    </button>

                    <button class="btn btn-info">
                        <i class="glyphicon glyphicon-envelope"></i>
                    </button>

                    <button class="btn btn-warning">
                        <i class="glyphicon glyphicon-envelope"></i>
                    </button>

                    <button class="btn btn-danger">
                        <i class="glyphicon glyphicon-envelope"></i>
                    </button>
                </div>
            </div><!-- #sidebar-shortcuts -->


            <ul class="nav nav-list">
                <li class="active">
                    <a href="index.html">
                        <i class="glyphicon glyphicon-home"></i>
                        <span class="menu-text"> 首页 </span>
                    </a>
                </li>

                <li>
                    <a href="#" class="dropdown-toggle">
                        <i class="glyphicon glyphicon-folder-open"></i>
                        <span class="menu-text"> 影片资源管理 </span>

                        <b class="arrow glyphicon glyphicon-chevron-down"></b>
                    </a>

                    <ul class="submenu">
                        <li id="select_grade">
                            <a onclick='ajax_HttpRequest("getGrades?page_num=1",1)'>
                                <i class="glyphicon glyphicon-menu-right"></i>
                                年级
                            </a>
                        </li>

                        <li>
                            <a onclick='ajax_HttpRequest("getSubjects?page_num=1",1)'>
                                <i class="glyphicon glyphicon-menu-right"></i>
                                学科
                            </a>
                        </li>

                        <li>
                            <a onclick='ajax_HttpRequest("getKnowledges?page_num=1",1)'>
                                <i class="glyphicon glyphicon-menu-right"></i>
                                知识点
                            </a>
                        </li>

                        <li>
                            <a onclick='ajax_HttpRequest("getVideos?page_num=1",1)'>
                                <i class="glyphicon glyphicon-menu-right"></i>
                                影片
                            </a>
                        </li>
                    </ul>
                </li>

                <li><!-- class="active open" -->
                    <a href="#" class="dropdown-toggle">
                        <i class="glyphicon glyphicon-user"></i>
                        <span class="menu-text"> 用户管理 </span>

                        <b class="arrow glyphicon glyphicon-chevron-down"></b>
                    </a>

                    <ul class="submenu">
                        <li>
                            <a onclick='ajax_HttpRequest("getUsers?page_num=1",1)'>
                                <i class="glyphicon glyphicon-menu-right"></i>
                                用户角色管理
                            </a>
                        </li>

                        <li>
                            <a onclick='ajax_HttpRequest("getRoles?page_num=1",1)'>
                                <i class="glyphicon glyphicon-menu-right"></i>
                                角色权限管理
                            </a>
                        </li>
                    </ul>
                </li>


                <li>
                    <a href="">
                        <i class="glyphicon glyphicon-th-list"></i>
                        <span class="menu-text"> 插件 </span>
                    </a>
                </li>

                <li>
                    <a href="">
                        <i class="glyphicon glyphicon-list-alt"></i>

                        <span class="menu-text">
									日历
									<span class="badge badge-transparent tooltip-error" title="2&nbsp;Important&nbsp;Events">
										<i class="icon-warning-sign red bigger-130"></i>
									</span>
								</span>
                    </a>
                </li>
            </ul><!-- /.nav-list -->

            <div class="sidebar-collapse" id="sidebar-collapse">
                <i class="glyphicon glyphicon-menu-left" data-icon1="glyphicon glyphicon-menu-left" data-icon2="glyphicon glyphicon-menu-right"></i>
            </div>

            <script type="text/javascript">
                try{ace.settings.check('sidebar' , 'collapsed')}catch(e){}
            </script>
        </div>

        <div class="main-content">
            <div class="breadcrumbs" id="breadcrumbs">
                <script type="text/javascript">
                    try{ace.settings.check('breadcrumbs' , 'fixed')}catch(e){}
                </script>

                <ul class="breadcrumb">
                    <li>
                        <span class="glyphicon glyphicon-home"></span>
                        <a href="index.html">Home</a>
                    </li>
                </ul><!-- .breadcrumb -->

                <div class="nav-search" id="nav-search">
                    <form class="form-search">
								<span class="glyphicon glyphicon-search">
									<input type="text" placeholder="Search ..." class="nav-search-input" id="nav-search-input" autocomplete="off">
									<i class="icon-search nav-search-icon"></i>
								</span>
                    </form>
                </div><!-- #nav-search -->
            </div>
            <div class="page-content">
                <div class="page-header">
                    <h1>
                        <span id="left-model">首页</span>
                        <small>
                            <span>></span>
                            管理
                        </small>
                    </h1>

                    <div id="search_0" style="visibility: visible;">
                        <div style="position: absolute;top: 67px;left: 350px;font-size: 18px;">
                            年级:
                        </div>
                        <div style="position: absolute;width: 100px;top: 63px;left: 395px;">
                            <select class="form-control" id="search_Grade">
                            </select>
                        </div>
                    </div>

                    <div id="search_1" style="visibility: visible;">
                        <div style="position: absolute;top: 67px;left: 495px;font-size: 18px;">
                            学科:
                        </div>
                        <div style="position: absolute;width: 100px;top: 63px;left: 540px;">
                            <select class="form-control" id="search_Subject">
                            </select>
                        </div>
                    </div>

                    <div id="search_2" style="visibility: visible;">
                        <div style="position: absolute;top: 67px;left: 645px;font-size: 18px;">
                            知识点:
                        </div>
                        <div style="position: absolute;width: 100px;top: 63px;left: 715px;">
                            <select class="form-control" id="search_KnowledgePoint">
                            </select>
                        </div>
                    </div>


                    <div style="position: absolute;width: 100px;top: 60px;left: 830px; visibility: hidden;" id="search_button">
                        <span class="glyphicon glyphicon-search"></span>
                        <button type="button" class="btn btn-success btn-sm" onclick="Search()">搜索</button>
                    </div>


                    <!-- 按钮 -->
                    <div class="col-md-4 col-md-offset-8" style="position: absolute;top: 50px;">
                        <button class="btn btn-primary" onclick="alert_add()">新增</button>
                        <button class="btn btn-danger">删除</button>
                    </div>
                </div><!-- /.page-header -->

                <div id="data_table" class="row" style="visibility: hidden;">
                    <div class="col-xs-12">
                        <div class="table-responsive" style="overflow: auto; width: 1280px;">
                            <table id="sample-table-1" class="table table-striped table-bordered table-hover" style="white-space: nowrap;">
                                <thead>
                                <tr>
                                    <th class="center">ID</th>
                                    <th>Name</th>
                                    <th id="sort">级数</th>
                                    <th id="knowledge">知识点</th>
                                    <th id="subject">学科</th>
                                    <th id="grade">年级</th>
                                    <th id="src">文件路径</th>
                                    <th>操作</th>
                                </tr>
                                </thead>

                                <tbody>
                                <tr id="tr_0" style="visibility: hidden;">
                                    <th id="id_0"></th>
                                    <th id="name_0"></th>
                                    <th id="sort_0"></th>
                                    <th id="knowledge_0"></th>
                                    <th id="subject_0"></th>
                                    <th id="grade_0"></th>
                                    <th id="src_0"></th>

                                    <th>
                                        <button class="btn btn-primary btn-sm" onclick="alert_update(0)">
                                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                            编辑
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="delete_news(0)">
                                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                            删除
                                        </button>
                                    </th>
                                </tr>

                                <tr id="tr_1" style="visibility: hidden;">
                                    <th id="id_1"></th>
                                    <th id="name_1"></th>
                                    <th id="sort_1"></th>
                                    <th id="knowledge_1"></th>
                                    <th id="subject_1"></th>
                                    <th id="grade_1"></th>
                                    <th id="src_1"></th>

                                    <th>
                                        <button class="btn btn-primary btn-sm" onclick="alert_update(1)">
                                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                            编辑
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="delete_news(1)">
                                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                            删除
                                        </button>
                                    </th>
                                </tr>

                                <tr id="tr_2" style="visibility: hidden;">
                                    <th id="id_2"></th>
                                    <th id="name_2"></th>
                                    <th id="sort_2"></th>
                                    <th id="knowledge_2"></th>
                                    <th id="subject_2"></th>
                                    <th id="grade_2"></th>
                                    <th id="src_2"></th>

                                    <th>
                                        <button class="btn btn-primary btn-sm" onclick="alert_update(2)">
                                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                            编辑
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="delete_news(2)">
                                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                            删除
                                        </button>
                                    </th>
                                </tr>

                                <tr id="tr_3" style="visibility: hidden;">
                                    <th id="id_3"></th>
                                    <th id="name_3"></th>
                                    <th id="sort_3"></th>
                                    <th id="knowledge_3"></th>
                                    <th id="subject_3"></th>
                                    <th id="grade_3"></th>
                                    <th id="src_3"></th>

                                    <th>
                                        <button class="btn btn-primary btn-sm" onclick="alert_update(3)">
                                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                            编辑
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="delete_news(3)">
                                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                            删除
                                        </button>
                                    </th>
                                </tr>

                                <tr id="tr_4" style="visibility: hidden;">
                                    <th id="id_4"></th>
                                    <th id="name_4"></th>
                                    <th id="sort_4"></th>
                                    <th id="knowledge_4"></th>
                                    <th id="subject_4"></th>
                                    <th id="grade_4"></th>
                                    <th id="src_4"></th>

                                    <th>
                                        <button class="btn btn-primary btn-sm" onclick="alert_update(4)">
                                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                            编辑
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="delete_news(4)">
                                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                            删除
                                        </button>
                                    </th>
                                </tr>
                                </tbody>
                            </table>
                        </div><!-- /.table-responsive -->
                    </div><!-- /span -->
                </div><!-- /row -->

                <div id="video_table" class="row" style="position: absolute;top: 110px;visibility: hidden;">
                    <div class="col-xs-12">
                        <div class="table-responsive" style="overflow: auto; width: 1280px;">
                            <table class="table table-striped table-bordered table-hover" style="white-space: nowrap;">
                                <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th id="knowledge">知识点</th>
                                    <th id="subject">学科</th>
                                    <th id="grade">年级</th>
                                    <th id="src">文件路径</th>
                                    <th id="sort">级数</th>
                                    <th id="clarity">清晰度</th>
                                    <th id="code_check">码率</th>
                                    <th id="introduction">简介</th>
                                    <th id="duration">时长</th>
                                    <th id="picture">Code</th>
                                    <th>操作</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr id="video_tr_0" style="visibility: hidden;">
                                    <th id="video_id_0"></th>
                                    <th id="video_name_0"></th>
                                    <th id="video_knowledge_0"></th>
                                    <th id="video_subject_0"></th>
                                    <th id="video_grade_0"></th>
                                    <th id="video_src_0"></th>
                                    <th id="video_sort_0"></th>
                                    <th id="video_clarity_0"></th>
                                    <th id="video_code_check_0"></th>
                                    <th id="video_introduction_0"></th>
                                    <th id="video_duration_0"></th>
                                    <th id="video_picture_0"></th>
                                    <th>
                                        <button class="btn btn-primary btn-sm" onclick="alert_update(0)">
                                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                            编辑
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="delete_news(0)">
                                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                            删除
                                        </button>
                                    </th>
                                </tr>

                                <tr id="video_tr_1" style="visibility: hidden;">
                                    <th id="video_id_1"></th>
                                    <th id="video_name_1"></th>
                                    <th id="video_knowledge_1"></th>
                                    <th id="video_subject_1"></th>
                                    <th id="video_grade_1"></th>
                                    <th id="video_src_1"></th>
                                    <th id="video_sort_1"></th>
                                    <th id="video_clarity_1"></th>
                                    <th id="video_code_check_1"></th>
                                    <th id="video_introduction_1"></th>
                                    <th id="video_duration_1"></th>
                                    <th id="video_picture_1"></th>
                                    <th>
                                        <button class="btn btn-primary btn-sm" onclick="alert_update(1)">
                                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                            编辑
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="delete_news(1)">
                                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                            删除
                                        </button>
                                    </th>
                                </tr>

                                <tr id="video_tr_2" style="visibility: hidden;">
                                    <th id="video_id_2"></th>
                                    <th id="video_name_2"></th>
                                    <th id="video_knowledge_2"></th>
                                    <th id="video_subject_2"></th>
                                    <th id="video_grade_2"></th>
                                    <th id="video_src_2"></th>
                                    <th id="video_sort_2"></th>
                                    <th id="video_clarity_2"></th>
                                    <th id="video_code_check_2"></th>
                                    <th id="video_introduction_2"></th>
                                    <th id="video_duration_2"></th>
                                    <th id="video_picture_2"></th>
                                    <th>
                                        <button class="btn btn-primary btn-sm" onclick="alert_update(2)">
                                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                            编辑
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="delete_news(2)">
                                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                            删除
                                        </button>
                                    </th>
                                </tr>

                                <tr id="video_tr_3" style="visibility: hidden;">
                                    <th id="video_id_3"></th>
                                    <th id="video_name_3"></th>
                                    <th id="video_knowledge_3"></th>
                                    <th id="video_subject_3"></th>
                                    <th id="video_grade_3"></th>
                                    <th id="video_src_3"></th>
                                    <th id="video_sort_3"></th>
                                    <th id="video_clarity_3"></th>
                                    <th id="video_code_check_3"></th>
                                    <th id="video_introduction_3"></th>
                                    <th id="video_duration_3"></th>
                                    <th id="video_picture_3"></th>
                                    <th>
                                        <button class="btn btn-primary btn-sm" onclick="alert_update(3)">
                                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                            编辑
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="delete_news(3)">
                                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                            删除
                                        </button>
                                    </th>
                                </tr>

                                <tr id="video_tr_4" style="visibility: hidden;">
                                    <th id="video_id_4"></th>
                                    <th id="video_name_4"></th>
                                    <th id="video_knowledge_4"></th>
                                    <th id="video_subject_4"></th>
                                    <th id="video_grade_4"></th>
                                    <th id="video_src_4"></th>
                                    <th id="video_sort_4"></th>
                                    <th id="video_clarity_4"></th>
                                    <th id="video_code_check_4"></th>
                                    <th id="video_introduction_4"></th>
                                    <th id="video_duration_4"></th>
                                    <th id="video_picture_4"></th>
                                    <th>
                                        <button class="btn btn-primary btn-sm" onclick="alert_update(4)">
                                            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                                            编辑
                                        </button>
                                        <button class="btn btn-danger btn-sm" onclick="delete_news(4)">
                                            <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
                                            删除
                                        </button>
                                    </th>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>


                <!-- 分页信息 -->
                <div class="row" style="background-color: #ecf5FF;width: 1300px;">
                    <div class="col-md-6" style="">
                        <div id="pages" style="line-height: 40px; font-size: 18px;position: absolute;top: 20px;">
                            当前第0页/共0页
                        </div>
                    </div>
                    <!-- 分页信息 -->
                    <div class="col-md-6">
                        <nav aria-label="Page navigation">
                            <ul class="pagination">
                                <li>
                                    <a onclick='page_up()'>
                                        上一页
                                    </a>
                                </li>
                                <li>
                                    <a onclick='page_down()'>
                                        下一页
                                    </a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>

            </div><!-- /.page-content -->
        </div><!-- /.main-content -->
    </div><!-- /.main-container-inner -->

    <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
        <i class="glyphicon glyphicon-menu-up"></i>
    </a>
</div><!-- /.main-container -->

<script type="text/javascript">

    var page_num = 1;//当前页码
    var pages;//总页码
    var address;//判断当前在哪个列表中
    var ID_List = new Array();//存放每次取过来数据的id(方便通过id来更改，删除数据)
    var Update_index;//点击右侧编辑时的下标
    var userName;//用户名
    getRole();//获取当前用户的角色，判断显示相应模块

    //获取当前用户的角色，判断是否显示用户管理(在LoginController中)
    function getRole(){
        //userName = getQueryString("username");
        $.ajax({
            type : 'POST',
            url: "getRole",
            async:false,
            success: function (data) {
                if (data != "") {
                    document.getElementById("Username").innerHTML =data.Username
                    if(data.role=="admin"){

                    }else if(data.role=="worker"){
                        document.getElementById("select_grade").style.display ="none";
                    }else if(data.role=="cosumer"){

                    }

                }
                document.getElementById("data_table").style.visibility ="visible";
            },
            error :function (data) {
                window.location="http://localhost:8080/CMS/Login.html";
            }
        });
    }

    var search_flag = 0;
    //分页查询数据，及数据填充
    function ajax_HttpRequest(url,num){
        document.getElementById("welcome").style.visibility ="hidden";

        if(url.split("?")[0]!="getAllSubjects_ByGrade_id"
            && url.split("?")[0]!="getAllKnowledges_BySubject_id" && url.split("?")[0]!="getVideos_ByKnowledge_id"){
            search_flag = 0;
            address = url.split("?")[0];
            getSearch();
        }else{
            search_flag = 1;
        }

        if(num != undefined){
            page_num = num;
        }

        $.ajax({
            type : 'GET',
            url: url,
            async:false,
            success: function (data) {
                if (data != "") {
                    if(address=="getVideos"){
                        document.getElementById("left-model").innerHTML ="影片";
                        document.getElementById("data_table").style.visibility ="hidden";
                        document.getElementById("video_table").style.visibility ="visible";
                        for(var i=0;i<5;i++){
                            document.getElementById("video_tr_"+i).style.visibility ="hidden";
                            document.getElementById("tr_"+i).style.visibility ="hidden";

                        }

                        for(var i=0;i<data.length;i++){
                            ID_List[i] = data[i].ID;
                            pages = data[i].pages;
                            document.getElementById("video_tr_"+i).style.visibility ="visible";
                            document.getElementById("video_id_"+i).innerHTML =data[i].ID== undefined ? "" : data[i].ID;
                            document.getElementById("video_name_"+i).innerHTML =data[i].Name== undefined ? "" : data[i].Name;
                            document.getElementById("video_knowledge_"+i).innerHTML =data[i].KnowledgeName == undefined ? "" : data[i].KnowledgeName;
                            document.getElementById("video_subject_"+i).innerHTML =data[i].SubjectName == undefined ? "" : data[i].SubjectName;
                            document.getElementById("video_grade_"+i).innerHTML =data[i].GradeName == undefined ? "" : data[i].GradeName;
                            document.getElementById("video_src_"+i).innerHTML =data[i].VideoSrc == undefined ? "" : data[i].VideoSrc;
                            document.getElementById("video_sort_"+i).innerHTML =data[i].sort == undefined ? "" : data[i].sort;
                            document.getElementById("video_clarity_"+i).innerHTML =data[i].clarity == undefined ? "" : data[i].clarity;
                            document.getElementById("video_code_check_"+i).innerHTML =data[i].code_check == undefined ? "" : data[i].code_check;
                            document.getElementById("video_introduction_"+i).innerHTML =data[i].introduction == undefined ? "" : data[i].introduction;
                            document.getElementById("video_duration_"+i).innerHTML =data[i].duration == undefined ? "" : data[i].duration;
                            document.getElementById("video_picture_"+i).innerHTML =data[i].picture == undefined ? "" : data[i].picture;
                            document.getElementById("pages").innerHTML ='当前第'+data[i].PageNum+'页/'+'共'+data[i].pages+'页'+'(共'+data[i].total+'条数据)' == '当前第0页/共0页(共0条数据)' ? "" : '当前第'+data[i].PageNum+'页/'+'共'+data[i].pages+'页'+'(共'+data[i].total+'条数据)';
                        }
                    }else{
                        document.getElementById("data_table").style.visibility ="visible";
                        document.getElementById("video_table").style.visibility ="hidden";
                        display_title();
                        for(var i=0;i<5;i++){
                            document.getElementById("video_tr_"+i).style.visibility ="hidden";
                            document.getElementById("tr_"+i).style.visibility ="hidden";

                        }
                        for(var i=0;i<data.length;i++){
                            ID_List[i] = data[i].ID;
                            pages = data[i].pages;
                            document.getElementById("tr_"+i).style.visibility ="visible";
                            document.getElementById("id_"+i).innerHTML =data[i].ID== undefined ? "" : data[i].ID;
                            document.getElementById("name_"+i).innerHTML =data[i].Name== undefined ? "" : data[i].Name;
                            if(address=="getUsers"){
                                document.getElementById("knowledge_"+i).innerHTML =data[i].Role == undefined ? "" : data[i].Role;
                            }else if(address=="getRoles"){
                                document.getElementById("knowledge_"+i).innerHTML =data[i].Authority == undefined ? "" : data[i].Authority;
                                //getAuthorityByRoleId(data[i].ID)
                            }else{
                                document.getElementById("knowledge_"+i).innerHTML =data[i].KnowledgeName == undefined ? "" : data[i].KnowledgeName;
                            }
                            if(address=="getUsers"){
                                document.getElementById("subject_"+i).innerHTML =data[i].Authority == undefined ? "" : data[i].Authority;
                            }else{
                                document.getElementById("subject_"+i).innerHTML =data[i].SubjectName == undefined ? "" : data[i].SubjectName;
                            }

                            document.getElementById("grade_"+i).innerHTML =data[i].GradeName == undefined ? "" : data[i].GradeName;
                            document.getElementById("src_"+i).innerHTML =data[i].Picture == undefined ? "" : data[i].Picture;
                            document.getElementById("sort_"+i).innerHTML =data[i].Sort == undefined ? "" : data[i].Sort;
                            document.getElementById("pages").innerHTML ='当前第'+data[i].PageNum+'页/'+'共'+data[i].pages+'页'+'(共'+data[i].total+'条数据)' == '当前第0页/共0页(共0条数据)' ? "" : '当前第'+data[i].PageNum+'页/'+'共'+data[i].pages+'页'+'(共'+data[i].total+'条数据)';
                        }
                    }


                }else{
                    for(var i=0;i<5;i++){
                        document.getElementById("video_tr_"+i).style.visibility ="hidden";
                        document.getElementById("tr_"+i).style.visibility ="hidden";
                        document.getElementById("pages").innerHTML ='当前第0页/共0页(共0条数据)';
                    }
                }
            },
            error :function (data) {
                //window.location="http://localhost:8080/CMS/Login.html";
            }
        });
    }


    $(function(){//当弹出框显示，选择下列节点时候触发，填充下拉框
        $('#Grade_select').change(function(e){
            if(address!="getSubjects"){

                document.getElementById("Subject_select").innerHTML="";
                document.getElementById("Konwledge_select").innerHTML="";
                getSubjectName("Subject_select",$('#Grade_select').val());
                if(address=="getVideos"){
                    setTimeout(function(){
                        if($('#Subject_select').val()!=null){
                            getKnowledge("Konwledge_select",$('#Subject_select').val());
                        }
                    },300);//延时
                }
            }
        })

        $('#Subject_select').change(function(e){
            if(address!="getKnowledges"){

                document.getElementById("Konwledge_select").innerHTML="";
                getKnowledge("Konwledge_select",$('#Subject_select').val());
            }
        })

        $('#update_Grade').change(function(e){
            if(address!="getSubjects"){

                document.getElementById("update_Subject").innerHTML="";
                document.getElementById("update_Knowledge").innerHTML="";
                getSubjectName("update_Subject",$('#update_Grade').val());

                if(address=="getVideos"){
                    setTimeout(function(){
                        if($('#update_Subject').val()!=null){
                            getKnowledge("update_Knowledge",$('#update_Subject').val());
                        }
                    },300);//延时
                }

            }
        })

        $('#update_Subject').change(function(e){
            if(address!="getKnowledges"){

                document.getElementById("update_Knowledge").innerHTML="";
                getKnowledge("update_Knowledge",$('#update_Subject').val());
            }
        })

        $('#search_Grade').change(function(){
            document.getElementById("search_Subject").innerHTML="";
            document.getElementById("search_KnowledgePoint").innerHTML="";
            if(address=="getKnowledges"){
                if($('#search_Grade').val()!=null){
                    getSubjectName("search_Subject",$('#search_Grade').val());
                }
            }else if(address=="getVideos"){
                if($('#search_Grade').val()!=null){
                    getSubjectName("search_Subject",$('#search_Grade').val());
                }

                if(address=="getVideos"){
                    setTimeout(function(){
                        if($('#search_Subject').val()!=null){
                            getKnowledge("search_KnowledgePoint",$('#search_Subject').val());
                        }
                    },300);//延时
                }
            }
        })

        $('#search_Subject').change(function(){
            document.getElementById("search_KnowledgePoint").innerHTML="";
            if(address=="getVideos"){
                setTimeout(function(){
                    if($('#search_Subject').val()!=null){
                        getKnowledge("search_KnowledgePoint",$('#search_Subject').val());
                    }
                },300);//延时
            }

        })

    });

    function display_title(){//根据当前列表判断是否显示其他的列
        if(address=="getGrades"){
            document.getElementById("left-model").innerHTML ="年级";
            document.getElementById("sort").innerHTML ="级数";
            document.getElementById("knowledge").innerHTML ="";
            document.getElementById("subject").innerHTML ="";
            document.getElementById("grade").innerHTML ="";
            document.getElementById("src").innerHTML ="";
        }else if(address=="getSubjects"){
            document.getElementById("left-model").innerHTML ="学科";
            document.getElementById("sort").innerHTML ="级数";
            document.getElementById("grade").innerHTML ="年级";
            document.getElementById("knowledge").innerHTML ="";
            document.getElementById("subject").innerHTML ="";
            document.getElementById("src").innerHTML ="";
        }else if(address=="getKnowledges"){
            document.getElementById("left-model").innerHTML ="知识点";
            document.getElementById("sort").innerHTML ="级数";
            document.getElementById("subject").innerHTML ="学科";
            document.getElementById("grade").innerHTML ="年级";
            document.getElementById("knowledge").innerHTML ="";
            document.getElementById("src").innerHTML ="海报";
        }else if(address=="getUsers"){
            document.getElementById("left-model").innerHTML ="用户";
            document.getElementById("knowledge").innerHTML ="角色";
            document.getElementById("subject").innerHTML ="额外权限";
            document.getElementById("grade").innerHTML ="";
            document.getElementById("src").innerHTML ="";
            document.getElementById("sort").innerHTML ="";
        }else if(address=="getRoles"){
            document.getElementById("left-model").innerHTML ="角色";
            document.getElementById("knowledge").innerHTML ="权限";
            document.getElementById("subject").innerHTML ="";
            document.getElementById("grade").innerHTML ="";
            document.getElementById("src").innerHTML ="";
            document.getElementById("sort").innerHTML ="";
        }else{
            document.getElementById("left-model").innerHTML ="首页";
            document.getElementById("sort").innerHTML ="级数";
            document.getElementById("knowledge").innerHTML ="知识点";
            document.getElementById("subject").innerHTML ="学科";
            document.getElementById("grade").innerHTML ="年级";
            document.getElementById("src").innerHTML ="文件路径";
        }
    }

    function page_up(){//上翻页
        if(page_num>1){
            page_num--;
            if(address=="getSubjects" && search_flag==1){
                ajax_HttpRequest("getAllSubjects_ByGrade_id?page_num="+page_num+"&Grade_id="+$('#search_Grade').val());
            }else if(address=="getKnowledges" && search_flag==1){
                ajax_HttpRequest("getAllKnowledges_BySubject_id?page_num="+page_num+"&Subject_id="+$('#search_Subject').val());
            }else if(address=="getVideos" && search_flag==1){
                ajax_HttpRequest("getVideos_ByKnowledge_id?page_num="+page_num+"&Knowledge_id="+$('#search_KnowledgePoint').val());
            }else{
                ajax_HttpRequest(address+"?page_num="+page_num);
            }
        }
    }

    function page_down(){//下翻页
        if(page_num<pages){
            page_num++;
            if(address=="getSubjects" && search_flag==1){
                ajax_HttpRequest("getAllSubjects_ByGrade_id?page_num="+page_num+"&Grade_id="+$('#search_Grade').val());
            }else if(address=="getKnowledges" && search_flag==1){
                ajax_HttpRequest("getAllKnowledges_BySubject_id?page_num="+page_num+"&Subject_id="+$('#search_Subject').val());
            }else if(address=="getVideos" && search_flag==1){

                ajax_HttpRequest("getVideos_ByKnowledge_id?page_num="+page_num+"&Knowledge_id="+$('#search_KnowledgePoint').val());
            }else{
                ajax_HttpRequest(address+"?page_num="+page_num);
            }
        }
    }


    function alert_update(num){//点击编辑弹出提示框，并填充下拉框内容
        Update_index = num;
        //发送ajax请求查询相关信息，存放在下拉列表中
        if(address!="" && address!=undefined){
            emptyUpdateSelect();
            if(address=="getUsers"){
                $('#update_Username_input').val(document.getElementById("name_"+Update_index).innerHTML);
                getRoleName("update_Role");
                getAuthorityName("User_update_Authority_select");
                $('#updateUserModal').modal({
                    backdrop:'static'
                });
            }else if(address=="getRoles"){
                $('#update_Rolename_input').val(document.getElementById("name_"+Update_index).innerHTML);
                getAuthorityName("update_Authority_select");
                $('#updateRoleModal').modal({
                    backdrop:'static'
                });
            }else{

                if(address=="getGrades"){
                    $('#update_name_input').val(document.getElementById("name_"+Update_index).innerHTML);
                    $('#update_Video_Sort').val(document.getElementById("sort_"+Update_index).innerHTML);
                }else if(address=="getSubjects"){
                    $('#update_name_input').val(document.getElementById("name_"+Update_index).innerHTML);
                    $('#update_Video_Sort').val(document.getElementById("sort_"+Update_index).innerHTML);
                    getGradeName("update_Grade");
                }else if(address=="getKnowledges"){
                    $('#update_name_input').val(document.getElementById("name_"+Update_index).innerHTML);
                    $('#update_Video_Sort').val(document.getElementById("sort_"+Update_index).innerHTML);
                    getGradeName("update_Grade");
                    setTimeout(function(){
                        getSubjectName("update_Subject",$('#update_Grade').val());
                    },300);//延时
                }else if(address=="getVideos"){
                    $('#update_name_input').val(document.getElementById("video_name_"+Update_index).innerHTML);
                    $('#update_video').val(document.getElementById("video_src_"+Update_index).innerHTML);
                    $('#update_Video_Sort').val(document.getElementById("video_sort_"+Update_index).innerHTML);
                    $('#update_Video_Clarity').val(document.getElementById("video_clarity_"+Update_index).innerHTML);
                    $('#update_Video_Check_code').val(document.getElementById("video_code_check_"+Update_index).innerHTML);
                    $('#update_Video_Introduction').val(document.getElementById("video_introduction_"+Update_index).innerHTML);
                    $('#update_Video_Duration').val(document.getElementById("video_duration_"+Update_index).innerHTML);
                    $('#update_VideoPicture').val(document.getElementById("video_picture_"+Update_index).innerHTML);
                    getGradeName("update_Grade");
                    setTimeout(function(){
                        getSubjectName("update_Subject",$('#update_Grade').val());
                    },300);//延时
                    setTimeout(function(){
                        getKnowledge("update_Knowledge",$('#update_Subject').val());
                    },500);//延时
                }
                $('#updateModal').modal({
                    backdrop:'static'
                });
            }


        }
    }

    function alert_add(){//点击新增弹出提示框，并填充下拉框内容
        //发送ajax请求查询相关信息，存放在下拉列表中
        if(address!="" && address!=undefined){
            emptySelect();

            if(address=="getUsers"){
                getAuthorityName("User_Authority_select");
                getRoleName("Role_select");
                $('#addUserModal').modal({
                    backdrop:'static'
                });
            }else if(address=="getRoles"){
                getAuthorityName("Authority_select");
                $('#addRoleModal').modal({
                    backdrop:'static'
                });
            }else{
                if(address=="getSubjects"){
                    getGradeName("Grade_select");
                }else if(address=="getKnowledges"){
                    getGradeName("Grade_select");
                    setTimeout(function(){

                        getSubjectName("Subject_select",$('#Grade_select').val());
                    },300);//延时
                }else if(address=="getVideos"){
                    getGradeName("Grade_select");
                    setTimeout(function(){
                        getSubjectName("Subject_select",$('#Grade_select').val());
                    },300);//延时
                    setTimeout(function(){
                        getKnowledge("Konwledge_select",$('#Subject_select').val());
                    },500);//延时
                }
                $('#addModal').modal({
                    backdrop:'static'
                });
            }


        }
    }

    function delete_news(num){//删除（根据传过来的num当做下标在id数组中取出相应的id）
        Update_index = num;

        if(address!="" && address!=undefined){
            ajax_delete();
        }
    }


    function getSubjectName(url,Grade_id){//根据年级id和url（新增的，还是更改的）填充科目的下拉框
        $.ajax({
            type : 'POST',
            url: "getAllSubjects",
            data:"Grade_id="+Grade_id,
            success: function (data) {
                if (data != "") {
                    for(var i=0;i<data.length;i++){
                        var option =$("<option></option>").append(data[i].Name).attr("value",data[i].ID);
                        option.appendTo(document.getElementById(url));
                    }

                }
            },
            error :function (data) {
                alert("error"+data);
            }
        });
    }

    function getKnowledge(url,Subject_id){//根据科目id和url（新增的，还是更改的）填充知识点的下拉框
        $.ajax({
            type : 'POST',
            url: "getAllKnowledges",
            data:"Subject_id="+Subject_id,
            success: function (data) {
                if (data != "") {
                    for(var i=0;i<data.length;i++){
                        var option =$("<option></option>").append(data[i].Name).attr("value",data[i].ID);
                        option.appendTo(document.getElementById(url));
                    }
                }
            },
            error :function (data) {
                alert("error"+data);
            }
        });
    }
    function getRoleName(url){//填充角色的下拉框
        $.ajax({
            type : 'GET',
            url: "getAllRoles",
            success: function (data) {
                if (data != "") {
                    for(var i=0;i<data.length;i++){
                        var option =$("<option></option>").append(data[i].Name).attr("value",data[i].ID);
                        option.appendTo(document.getElementById(url));
                    }
                }
            },
            error :function (data) {
                alert("error"+data);
            }
        });
    }

    function getGradeName(url){//填充年级的下拉框
        $.ajax({
            type : 'GET',
            url: "getAllGrades",
            success: function (data) {
                if (data != "") {
                    for(var i=0;i<data.length;i++){
                        var option =$("<option></option>").append(data[i].Name).attr("value",data[i].ID);
                        option.appendTo(document.getElementById(url));
                    }
                    /* $("#"+url).selectpicker('refresh');
                    $("#"+url).selectpicker('render'); */
                }
            },
            error :function (data) {
                alert("error"+data);
            }
        });
    }


    //填充权限
    function getAuthorityName(url){
        $.ajax({
            type : 'GET',
            url: "getAllAuthority",
            success: function (data) {
                if (data != "") {
                    $("#"+url).selectpicker({
                        /* 'selectedTest' : 'cat', */
                        noneSelectedText:'请选择'
                    });
                    for(var i=0;i<data.length;i++){
                        var option =$("<option></option>").append(data[i].Name).attr("value",data[i].Name);
                        option.appendTo(document.getElementById(url));
                    }
                    $("#"+url).selectpicker('refresh');
                    $("#"+url).selectpicker('render');
                }
            },
            error :function (data) {
                alert("error"+data);
            }
        });
    }


    function emptySelect(){//清空新增下拉列表中的数据,并根据左侧栏目判断是否显示新增弹出框对应的字段
        if(address=="getVideos"){
            document.getElementById("add_Grade").style.display="block";
            document.getElementById("add_Subject").style.display="block";
            document.getElementById("add_Konwledge").style.display="block";
            document.getElementById("video_src").style.display="block";
            document.getElementById("video_clarity").style.display="block";
            document.getElementById("video_code").style.display="block";
            document.getElementById("video_introduction").style.display="block";
            document.getElementById("video_duration").style.display="block";
            document.getElementById("video_picture").style.display="block";
        }else if(address=="getGrades"){
            document.getElementById("add_Grade").style.display="none";
            document.getElementById("add_Subject").style.display="none";
            document.getElementById("add_Konwledge").style.display="none";
            document.getElementById("video_src").style.display="none";
            document.getElementById("video_clarity").style.display="none";
            document.getElementById("video_code").style.display="none";
            document.getElementById("video_introduction").style.display="none";
            document.getElementById("video_duration").style.display="none";
            document.getElementById("video_picture").style.display="none";
        }else if(address=="getSubjects"){
            document.getElementById("add_Grade").style.display="block";
            document.getElementById("add_Subject").style.display="none";
            document.getElementById("add_Konwledge").style.display="none";
            document.getElementById("video_src").style.display="none";
            document.getElementById("video_clarity").style.display="none";
            document.getElementById("video_code").style.display="none";
            document.getElementById("video_introduction").style.display="none";
            document.getElementById("video_duration").style.display="none";
            document.getElementById("video_picture").style.display="none";
        }else if(address=="getKnowledges"){
            document.getElementById("add_Grade").style.display="block";
            document.getElementById("add_Subject").style.display="block";
            document.getElementById("add_Konwledge").style.display="none";
            document.getElementById("video_src").style.display="none";
            document.getElementById("video_clarity").style.display="none";
            document.getElementById("video_code").style.display="none";
            document.getElementById("video_introduction").style.display="none";
            document.getElementById("video_duration").style.display="none";
            document.getElementById("video_picture").style.display="none";
        }
        document.getElementById("Konwledge_select").innerHTML="";
        document.getElementById("Grade_select").innerHTML="";
        document.getElementById("Role_select").innerHTML="";
        document.getElementById("Subject_select").innerHTML="";
        document.getElementById("Authority_select").innerHTML="";
        document.getElementById("User_Authority_select").innerHTML="";
    }

    function emptyUpdateSelect(){//清空修改下拉列表中的数据，并根据左侧栏目判断显示更改弹出框的相应字段
        if(address=="getVideos"){
            document.getElementById("update_Grade_div").style.display="block";
            document.getElementById("update_Subject_div").style.display="block";
            document.getElementById("update_Knowledge_div").style.display="block";
            document.getElementById("update_video_src").style.display="block";
            document.getElementById("update_video_clarity").style.display="block";
            document.getElementById("update_video_code").style.display="block";
            document.getElementById("update_video_introduction").style.display="block";
            document.getElementById("update_video_duration").style.display="block";
            document.getElementById("update_video_picture").style.display="block";
        }else if(address=="getGrades"){
            document.getElementById("update_Grade_div").style.display="none";
            document.getElementById("update_Subject_div").style.display="none";
            document.getElementById("update_Knowledge_div").style.display="none";
            document.getElementById("update_video_src").style.display="none";
            document.getElementById("update_video_clarity").style.display="none";
            document.getElementById("update_video_code").style.display="none";
            document.getElementById("update_video_introduction").style.display="none";
            document.getElementById("update_video_duration").style.display="none";
            document.getElementById("update_video_picture").style.display="none";
        }else if(address=="getSubjects"){
            document.getElementById("update_Grade_div").style.display="block";
            document.getElementById("update_Subject_div").style.display="none";
            document.getElementById("update_Knowledge_div").style.display="none";
            document.getElementById("update_video_src").style.display="none";
            document.getElementById("update_video_clarity").style.display="none";
            document.getElementById("update_video_code").style.display="none";
            document.getElementById("update_video_introduction").style.display="none";
            document.getElementById("update_video_duration").style.display="none";
            document.getElementById("update_video_picture").style.display="none";
        }else if(address=="getKnowledges"){
            document.getElementById("update_Grade_div").style.display="block";
            document.getElementById("update_Subject_div").style.display="block";
            document.getElementById("update_Knowledge_div").style.display="none";
            document.getElementById("update_video_src").style.display="none";
            document.getElementById("update_video_clarity").style.display="none";
            document.getElementById("update_video_code").style.display="none";
            document.getElementById("update_video_introduction").style.display="none";
            document.getElementById("update_video_duration").style.display="none";
            document.getElementById("update_video_picture").style.display="none";
        }
        document.getElementById("update_Knowledge").innerHTML="";
        document.getElementById("update_Grade").innerHTML="";
        document.getElementById("update_Role").innerHTML="";
        document.getElementById("update_Subject").innerHTML="";
        document.getElementById("update_Authority_select").innerHTML="";
        document.getElementById("User_update_Authority_select").innerHTML="";
    }


    //角色新增（保存）
    function addRole_save(){
        var addUrl;
        if(address=="getRoles"){
            addUrl = "addRole";
        }

        var str = [];
        var obj = document.getElementById("Authority_select");
        for (var i = 0; i < obj.options.length; i++) {
            if (obj.options[i].selected) {
                str.push(obj.options[i].value); // 收集选中项
            }
        }

        $.ajax({
            type : 'POST',
            url: addUrl,
            data:"Name="+$("#add_Rolename_input").val()+"&AuthorityId="+str,
            success: function (data) {
                $('#addRoleModal').modal('hide');//弹出框消失
                //从新获取新的页码，并跳转到最后一页
                ajax_HttpRequest(address);
                ajax_HttpRequest(address+"?page_num="+pages,pages);
            },
            error :function (data) {
                $('#addRoleModal').modal('hide');//弹出框消失
                document.getElementById("error_info").innerHTML ="新增失败，当前您没有权限";
                $("#delete_fail").modal({
                    backdrop:'static'
                });
            }
        });
    }


    //用户新增（保存）
    function addUser_save(){
        var addUrl;
        if(address=="getUsers"){
            addUrl = "addUser";
        }

        var str = [];
        var obj = document.getElementById("User_Authority_select");
        for (var i = 0; i < obj.options.length; i++) {
            if (obj.options[i].selected) {
                str.push(obj.options[i].value); // 收集选中项
            }
        }

        $.ajax({
            type : 'POST',
            url: addUrl,
            data:$("#addUserModal form").serialize()+"&AuthorityId="+str,
            success: function (data) {
                $('#addUserModal').modal('hide');//弹出框消失
                //从新获取新的页码，并跳转到最后一页
                ajax_HttpRequest(address);
                ajax_HttpRequest(address+"?page_num="+pages,pages);
            },
            error :function (data) {
                $('#addUserModal').modal('hide');//弹出框消失
                document.getElementById("error_info").innerHTML ="新增失败，当前您没有权限";
                $("#delete_fail").modal({
                    backdrop:'static'
                });
            }
        });
    }

    //新增（除用户外）
    function add_save(){
        var addUrl;
        if(address=="getGrades"){
            addUrl = "addGrade";
        }else if(address=="getSubjects"){
            addUrl = "addSubject";
        }else if(address=="getKnowledges"){
            addUrl = "addKnowledge";
        }else if(address=="getVideos"){
            addUrl = "addvideo";
        }

        $.ajax({
            type : 'POST',
            url: addUrl,
            data:$("#addModal form").serialize(),
            success: function (data) {
                $('#addModal').modal('hide');//弹出框消失
                //从新获取新的页码，并跳转到最后一页
                ajax_HttpRequest(address);
                ajax_HttpRequest(address+"?page_num="+pages,pages);
            },
            error :function (data) {
                $('#addModal').modal('hide');//弹出框消失
                document.getElementById("error_info").innerHTML ="新增失败，当前您没有权限";
                $("#delete_fail").modal({
                    backdrop:'static'
                });
            }
        });
    }

    //角色更改
    function updateRole_save(){
        var updateUrl;
        if(address=="getRoles"){
            updateUrl = "updateRole";
        }

        var str = [];
        var obj = document.getElementById("update_Authority_select");
        for (var i = 0; i < obj.options.length; i++) {
            if (obj.options[i].selected) {
                str.push(obj.options[i].value); // 收集选中项
            }
        }

        $.ajax({
            type : 'POST',
            url: updateUrl,
            data:"Name="+$("#update_Rolename_input").val()+"&AuthorityId="+str+"&ID="+ID_List[Update_index],
            success: function (data) {
                $('#updateRoleModal').modal('hide');//弹出框消失
                //从新获取新的页码，并跳转到最后一页
                ajax_HttpRequest(address);
                ajax_HttpRequest(address+"?page_num="+pages,pages);
            },
            error :function (data) {
                $('#updateRoleModal').modal('hide');//弹出框消失
                document.getElementById("error_info").innerHTML ="新增失败，当前您没有权限";
                $("#delete_fail").modal({
                    backdrop:'static'
                });
            }
        });
    }


    //用户更改
    function updateUser_save(){
        var updateUrl;
        if(address=="getUsers"){
            updateUrl = "updateUser";
        }

        var str = [];
        var obj = document.getElementById("User_update_Authority_select");
        for (var i = 0; i < obj.options.length; i++) {
            if (obj.options[i].selected) {
                str.push(obj.options[i].value); // 收集选中项
            }
        }
        $.ajax({
            type : 'POST',
            url: updateUrl,
            data:$("#updateUserModal form").serialize()+"&ID="+ID_List[Update_index]+"&AuthorityId="+str,
            success: function (data) {
                $('#updateUserModal').modal('hide');//弹出框消失
                ajax_HttpRequest(address+"?page_num="+page_num);
            },
            error :function (data) {
                $('#updateUserModal').modal('hide');//弹出框消失
                document.getElementById("error_info").innerHTML ="更改失败，当前您没有权限";
                $("#delete_fail").modal({
                    backdrop:'static'
                });
            }
        });
    }


    //更改
    function update_save(){
        var updateUrl;
        if(address=="getGrades"){
            updateUrl = "updateGrade";
        }else if(address=="getSubjects"){
            updateUrl = "updateSubject";
        }else if(address=="getKnowledges"){
            updateUrl = "updateKnowledge";
        }else if(address=="getVideos"){
            updateUrl = "updatevideo";
        }
        $.ajax({
            type : 'POST',
            url: updateUrl,
            data:$("#updateModal form").serialize()+"&ID="+ID_List[Update_index]+"&_method=PUT",
            success: function (data) {
                $('#updateModal').modal('hide');//弹出框消失
                ajax_HttpRequest(address+"?page_num="+page_num);
            },
            error :function (data) {
                $('#updateModal').modal('hide');//弹出框消失
                document.getElementById("error_info").innerHTML ="更改失败，当前您没有权限";
                $("#delete_fail").modal({
                    backdrop:'static'
                });
            }
        });
    }
    //删除
    function ajax_delete(){
        var deleteUrl;
        if(address=="getGrades"){
            deleteUrl = "deleteGrade";
        }else if(address=="getSubjects"){
            deleteUrl = "deleteSubject";
        }else if(address=="getKnowledges"){
            deleteUrl = "deleteKnowledge";
        }else if(address=="getVideos"){
            deleteUrl = "video";
        }else if(address=="getUsers"){
            deleteUrl = "deleteuser";
        }else if(address=="getRoles"){
            deleteUrl = "deleterole";
        }

        $.ajax({

            url: deleteUrl,
            type : 'POST',
            data:{
                ID:ID_List[Update_index],
                _method:'DELETE'
            },
            success: function (data) {
                ajax_HttpRequest(address);
                if(page_num>pages){
                    ajax_HttpRequest(address+"?page_num="+pages,pages);
                }else{
                    ajax_HttpRequest(address+"?page_num="+page_num);
                }
            },
            error :function (data) {
                document.getElementById("error_info").innerHTML ="删除失败，当前节点下存在子节点或您没有权限";
                $("#delete_fail").modal({
                    backdrop:'static'
                });
            }
        });
    }

    function getSearch(){//搜索下拉框中根据模块显示及填充数据
        document.getElementById("search_Grade").innerHTML="";
        document.getElementById("search_Subject").innerHTML="";
        document.getElementById("search_KnowledgePoint").innerHTML="";
        if(address=="getSubjects"){
            document.getElementById("search_0").style.visibility ="visible";
            document.getElementById("search_1").style.visibility ="hidden";
            document.getElementById("search_2").style.visibility ="hidden";
            document.getElementById("search_button").style.visibility ="visible";
            getGradeName("search_Grade");

        }else if(address=="getKnowledges"){
            document.getElementById("search_0").style.visibility ="visible";
            document.getElementById("search_1").style.visibility ="visible";
            document.getElementById("search_2").style.visibility ="hidden";
            document.getElementById("search_button").style.visibility ="visible";
            getGradeName("search_Grade");
            setTimeout(function(){
                if($('#search_Grade').val()!=null){

                    getSubjectName("search_Subject",$('#search_Grade').val());
                }
            },300);//延时
        }else if(address=="getVideos"){
            document.getElementById("search_0").style.visibility ="visible";
            document.getElementById("search_1").style.visibility ="visible";
            document.getElementById("search_2").style.visibility ="visible";
            document.getElementById("search_button").style.visibility ="visible";
            getGradeName("search_Grade");
            setTimeout(function(){
                if($('#search_Grade').val()!=null){

                    getSubjectName("search_Subject",$('#search_Grade').val());
                }
            },300);//延时

            setTimeout(function(){
                if($('#search_Subject').val()!=null){

                    getKnowledge("search_KnowledgePoint",$('#search_Subject').val());
                }
            },600);
        }else{
            document.getElementById("search_0").style.visibility ="hidden";
            document.getElementById("search_1").style.visibility ="hidden";
            document.getElementById("search_2").style.visibility ="hidden";
            document.getElementById("search_button").style.visibility ="hidden";
        }
    }

    function Search(){
        if(address=="getSubjects"){
            if($('#search_Grade').val()!=null){
                ajax_HttpRequest("getAllSubjects_ByGrade_id?Grade_id="+$('#search_Grade').val(),1);
            }
        }else if(address=="getKnowledges"){
            if($('#search_Subject').val()!=null){
                ajax_HttpRequest("getAllKnowledges_BySubject_id?Subject_id="+$('#search_Subject').val(),1);
            }
        }else if(address=="getVideos"){
            if($('#search_KnowledgePoint').val()!=null){
                ajax_HttpRequest("getVideos_ByKnowledge_id?Knowledge_id="+$('#search_KnowledgePoint').val(),1);
            }
        }
    }

</script>
</body>
</html>
